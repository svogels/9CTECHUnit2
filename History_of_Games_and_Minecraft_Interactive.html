<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Differentiated Learning Activities: Game Design</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #343a40;
        }
        .activity-tab {
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
        }
        .activity-tab.active {
            border-bottom-color: #4a90e2;
            color: #4a90e2;
            font-weight: 600;
        }
        .timeline-era {
            border-left: 4px solid #e9ecef;
            min-height: 150px;
        }
        .timeline-item {
            cursor: grab;
            transition: all 0.2s ease;
            position: relative; /* Added for tooltip positioning */
        }
        .timeline-item:active {
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            z-index: 10;
        }
        /* Tooltip styles */
        .tooltip {
            visibility: hidden;
            width: 160px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 110%; /* Position above the item */
            left: 50%;
            margin-left: -80px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
        }
        .timeline-item:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        /* New styles for era title tooltips */
        .era-title-container {
            position: relative;
            display: inline-block;
        }
        .era-title-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        .drop-zone {
            border: 2px dashed #ced4da;
            transition: background-color 0.3s;
        }
        .drop-zone.over {
            background-color: #e2eefc;
        }
        .feedback {
            transition: opacity 0.5s ease;
        }
        .read-aloud-btn {
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #e7f3ff;
            color: #4a90e2;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .read-aloud-btn:hover {
            background-color: #d0e7ff;
        }
        .mcq-option {
            border: 2px solid #dee2e6;
            transition: all 0.2s ease;
        }
        .mcq-option:hover {
            border-color: #4a90e2;
            background-color: #f8f9fa;
        }
        .mcq-option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .mcq-option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .hidden-by-default { display: none; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app-container" class="max-w-7xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Interactive Learning: Game Design</h1>
            <p class="mt-2 text-gray-600">Activities adapted for Year 9 Computer Technology.</p>
        </header>

        <div class="border-b border-gray-200 mb-6">
            <nav class="flex justify-center -mb-px space-x-8" aria-label="Tabs">
                <button id="tab-history" class="activity-tab active py-4 px-1 text-center text-gray-500 hover:text-gray-700 text-lg">History of Games</button>
                <button id="tab-minecraft" class="activity-tab py-4 px-1 text-center text-gray-500 hover:text-gray-700 text-lg">Creator of Minecraft</button>
            </nav>
        </div>

        <main id="main-content">
            <div id="activity-history">
                <div id="history-instructions" class="bg-blue-50 p-4 rounded-lg mb-6">
                    <h2 class="text-xl font-bold text-blue-800">Activity: History of Games Timeline</h2>
                    <p class="text-blue-700 mt-1">Hover over an item or title to see its description. Drag and drop the game images into the correct era. Use the <span class="font-bold">Read Aloud</span> <span class="read-aloud-btn text-xs">ðŸ”Š</span> button if you need help with the text.</p>
                </div>
                <div id="timeline-items-pool" class="flex flex-wrap justify-center gap-4 mb-8 p-4 bg-gray-100 rounded-lg"></div>
                <div id="timeline" class="space-y-8"></div>
                <div id="history-feedback" class="mt-6 text-center font-bold text-2xl h-8"></div>
                 <div class="text-center mt-8 border-t pt-6">
                    <button id="download-history-pdf" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Download History of Games as PDF
                    </button>
                </div>
            </div>

            <div id="activity-minecraft" class="hidden-by-default">
                <div class="bg-green-50 p-4 rounded-lg mb-6">
                    <h2 class="text-xl font-bold text-green-800">Activity: The Creator of Minecraft</h2>
                    <p class="text-green-700 mt-1">Read the passages about Markus 'Notch' Persson. Use the <span class="font-bold">Read Aloud</span> <span class="read-aloud-btn text-xs">ðŸ”Š</span> button for help, then answer the questions.</p>
                </div>
                <div id="minecraft-content" class="max-w-4xl mx-auto space-y-6"></div>
                 <div class="text-center mt-8 border-t pt-6">
                    <button id="download-minecraft-pdf" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Download Creator of Minecraft as PDF
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- DATA ---
        const historyData = [
            { id: 'item1', era: 'mainframe', title: 'Tennis for Two', content: 'One of the first electronic games, created on an oscilloscope.', img: 'https://placehold.co/100x100/4a90e2/ffffff?text=Tennis' },
            { id: 'item2', era: 'arcade', title: 'Pong', content: 'A smash hit arcade game that brought video games to the mainstream.', img: 'https://placehold.co/100x100/4a90e2/ffffff?text=Pong' },
            { id: 'item3', era: 'arcade', title: 'Space Invaders', content: 'A classic shooter that defined a generation of arcade games.', img: 'https://placehold.co/100x100/4a90e2/ffffff?text=Invaders' },
            { id: 'item4', era: 'home', title: 'Atari 2600', content: 'A popular early home console that used interchangeable game cartridges.', img: 'https://placehold.co/100x100/4a90e2/ffffff?text=Atari' },
            { id: 'item5', era: 'online', title: 'Online Gaming', content: 'The internet allowed players to compete with each other from around the world.', img: 'https://placehold.co/100x100/4a90e2/ffffff?text=Online' },
            { id: 'item6', era: 'mobile', title: 'Snake on Nokia Phones', content: 'A simple but addictive game that made mobile gaming popular.', img: 'https://placehold.co/100x100/4a90e2/ffffff?text=Snake' },
        ];
        const timelineEras = [
            { id: 'mainframe', title: 'The Earliest Mainframe Games (1950s-60s)', content: 'Games were created by scientists on huge, room-sized computers.' },
            { id: 'arcade', title: 'The Era of Arcade Games (1970s-80s)', content: 'Coin-operated machines appeared in arcades and shops.' },
            { id: 'home', title: 'Programmable Home Consoles (Late 1970s-80s)', content: 'Consoles like Atari brought gaming into the living room.' },
            { id: 'online', title: 'Online Gaming (1990s)', content: 'The internet connected players globally for multiplayer games.' },
            { id: 'mobile', title: 'The Mobile Revolution (2000s)', content: 'Games on mobile phones became very popular.' },
        ];
        const minecraftData = [
            { type: 'passage', content: `The best-selling video game of all time is Minecraft, officially launched in 2011. It's a sandbox game where players have unlimited freedom. The game operates in several different modes, such as survival mode, where players must gather resources to protect themselves, and creative mode, where players have unlimited resources to build.` },
            { type: 'question', question: "In which mode do players have unlimited resources?", options: ["Survival Mode", "Creative Mode", "Adventure Mode"], answer: "Creative Mode" },
            { type: 'passage', content: `In 2009, Swedish programmer Markus 'Notch' Persson was developing his own games at home. He was inspired by other games like Dwarf Fortress and Infiniminer. He realized that digging, exploring, and building were more fun from a first-person point of view.` },
            { type: 'passage', content: `When asked how he codes, Persson explained, "I kind of 'code-sketch'. I get started with a project by actually writing the code for it and getting something up on the screen. Then I play around with it and see if it's any fun, and change the parts that aren't." His girlfriend was his first tester, and he said her feedback was very important.` },
            { type: 'question', question: "What is one practice Markus Persson used when developing Minecraft?", options: ["Writing a full plan before coding", "Coding a little bit and then testing if it's fun", "Only getting feedback from other professional developers"], answer: "Coding a little bit and then testing if it's fun" }
        ];

        // --- DOM ELEMENTS ---
        const tabHistory = document.getElementById('tab-history');
        const tabMinecraft = document.getElementById('tab-minecraft');
        const activityHistory = document.getElementById('activity-history');
        const activityMinecraft = document.getElementById('activity-minecraft');

        // --- SPEECH SYNTHESIS ---
        const synth = window.speechSynthesis;
        function speak(text) {
            if (synth.speaking) {
                synth.cancel();
            }
            const utterance = new SpeechSynthesisUtterance(text);
            synth.speak(utterance);
        }
        
        // --- PDF DOWNLOAD FUNCTION ---
        function downloadPDF(elementId, filename) {
            const element = document.getElementById(elementId);
            const opt = {
                margin:       0.5,
                filename:     filename,
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, useCORS: true }, // useCORS for external images
                jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            // Use the html2pdf library to generate the PDF
            html2pdf().from(element).set(opt).save();
        }

        // --- RENDER FUNCTIONS ---
        function renderHistoryActivity() {
            const itemsPool = document.getElementById('timeline-items-pool');
            const timelineContainer = document.getElementById('timeline');
            itemsPool.innerHTML = '';
            timelineContainer.innerHTML = '';
            historyData.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.id = item.id;
                itemEl.dataset.era = item.era;
                itemEl.draggable = true;
                itemEl.className = 'timeline-item bg-white p-2 rounded-lg shadow flex items-center gap-3';
                itemEl.innerHTML = `
                    <img src="${item.img}" alt="${item.title}" class="w-12 h-12 rounded-md">
                    <span class="font-semibold">${item.title}</span>
                    <div class="tooltip">${item.content}</div>`;
                itemsPool.appendChild(itemEl);
            });
            timelineEras.forEach(era => {
                const eraEl = document.createElement('div');
                eraEl.className = 'timeline-era pl-8 relative';
                eraEl.innerHTML = `
                    <div class="absolute -left-2.5 top-0 w-5 h-5 bg-blue-500 rounded-full border-4 border-white"></div>
                    <div class="era-title-container">
                        <h3 class="text-lg font-bold text-gray-700">${era.title} <button class="read-aloud-btn" data-text="${era.title}">ðŸ”Š</button></h3>
                        <div class="tooltip">${era.content}</div>
                    </div>
                    <div class="drop-zone mt-2 p-4 rounded-lg min-h-[100px] w-full" data-era="${era.id}"></div>`;
                timelineContainer.appendChild(eraEl);
            });
            addDragAndDropListeners();
            addReadAloudListeners();
            // Add listener for the new PDF button
            document.getElementById('download-history-pdf').addEventListener('click', () => {
                downloadPDF('activity-history', 'history-of-games-completed.pdf');
            });
        }

        function renderMinecraftActivity() {
            const container = document.getElementById('minecraft-content');
            container.innerHTML = '';
            minecraftData.forEach(item => {
                const el = document.createElement('div');
                if (item.type === 'passage') {
                    el.className = 'prose max-w-none';
                    el.innerHTML = `<p>${item.content} <button class="read-aloud-btn" data-text="${item.content}">ðŸ”Š</button></p>`;
                } else if (item.type === 'question') {
                    el.className = 'p-4 border border-gray-200 rounded-lg shadow-sm';
                    let optionsHTML = item.options.map(opt => `<button class="mcq-option block w-full text-left p-3 mt-2 rounded-lg" data-answer="${item.answer}" data-option="${opt}">${opt} <button class="read-aloud-btn" data-text="${opt}">ðŸ”Š</button></button>`).join('');
                    el.innerHTML = `<p class="font-semibold">${item.question} <button class="read-aloud-btn" data-text="${item.question}">ðŸ”Š</button></p><div class="mt-2">${optionsHTML}</div><div class="feedback mt-2 h-6 font-semibold"></div>`;
                }
                container.appendChild(el);
            });
            addMinecraftListeners();
            addReadAloudListeners();
            // Add listener for the new PDF button
            document.getElementById('download-minecraft-pdf').addEventListener('click', () => {
                downloadPDF('activity-minecraft', 'creator-of-minecraft-completed.pdf');
            });
        }

        // --- EVENT LISTENERS & LOGIC ---
        function addDragAndDropListeners() {
            const items = document.querySelectorAll('.timeline-item');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            items.forEach(item => {
                item.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('text/plain', e.target.closest('.timeline-item').id);
                    setTimeout(() => item.classList.add('opacity-50'), 0);
                });
                item.addEventListener('dragend', () => item.classList.remove('opacity-50'));
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', e => {
                    e.preventDefault(); 
                    zone.classList.add('over');
                });
                zone.addEventListener('dragleave', () => zone.classList.remove('over'));
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('over');
                    const id = e.dataTransfer.getData('text/plain');
                    const draggable = document.getElementById(id);
                    const feedbackEl = document.getElementById('history-feedback');
                    
                    if (draggable && draggable.dataset.era === zone.dataset.era) {
                        zone.appendChild(draggable); 
                        draggable.draggable = false; 
                        draggable.style.cursor = 'default';
                        feedbackEl.textContent = 'Correct!';
                        feedbackEl.className = 'mt-6 text-center font-bold text-2xl h-8 text-green-500';
                    } else {
                        feedbackEl.textContent = 'Try Again!';
                        feedbackEl.className = 'mt-6 text-center font-bold text-2xl h-8 text-red-500';
                    }
                    setTimeout(() => feedbackEl.textContent = '', 2000);
                });
            });
        }

        function addMinecraftListeners() {
            document.querySelectorAll('.mcq-option').forEach(button => {
                button.addEventListener('click', e => {
                    const selectedOption = e.currentTarget.dataset.option;
                    const correctAnswer = e.currentTarget.dataset.answer;
                    const parent = e.currentTarget.parentElement;
                    const feedbackEl = parent.nextElementSibling;
                    
                    parent.querySelectorAll('.mcq-option').forEach(btn => btn.disabled = true);

                    if (selectedOption === correctAnswer) {
                        e.currentTarget.classList.add('correct');
                        feedbackEl.textContent = 'Correct!';
                        feedbackEl.classList.add('text-green-600');
                    } else {
                        e.currentTarget.classList.add('incorrect');
                        feedbackEl.textContent = `Not quite. The correct answer was: ${correctAnswer}.`;
                        feedbackEl.classList.add('text-red-600');
                    }
                });
            });
        }
        
        function addReadAloudListeners() {
            document.querySelectorAll('.read-aloud-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    e.stopPropagation(); 
                    speak(e.currentTarget.dataset.text);
                });
            });
        }

        // --- TAB SWITCHING ---
        tabHistory.addEventListener('click', () => {
            tabHistory.classList.add('active');
            tabMinecraft.classList.remove('active');
            activityHistory.classList.remove('hidden-by-default');
            activityMinecraft.classList.add('hidden-by-default');
            renderHistoryActivity();
        });

        tabMinecraft.addEventListener('click', () => {
            tabMinecraft.classList.add('active');
            tabHistory.classList.remove('active');
            activityMinecraft.classList.remove('hidden-by-default');
            activityHistory.classList.add('hidden-by-default');
            renderMinecraftActivity();
        });

        // --- INITIAL RENDER ---
        renderHistoryActivity();
    </script>
</body>
</html>
